## Internationalization (i18n)

### Overview
- Central module: `pkg/i18n`
  - YAML-driven catalogs: `configs/locales/{en,vi}.yaml`
  - API: `Init(dir, defaultLocale)`, `RenderLocale(locale, key, args...)`, `ParseAcceptLanguage`, `RegisterCatalog`, `SetDefaultLocale`, `DefaultLocale()`
  - Thread-safe with mutex; region fallback (e.g., `vi-VN` → `vi`); logs missing keys

- Framework coupling: none. Gin-specific concerns live in `internal/interfaces/http/middleware/locale.go`.

### Usage
- Bootstrap (`cmd/api`):
  - Call `initI18n(cfg)` → clears built-in templates if directory exists, then loads YAML.
  - Attach `LocaleMiddleware()` early in router: sets `locale` in Gin context based on `Accept-Language`.

- Validation/messages
  - Validation messages go through helpers in `internal/interfaces/http/validation/messages.go` which delegate to `pkg/i18n`.
  - Formatter registry renders localized messages with `MapValidationErrorsWithLocale` and `MapBindJSONErrorWithLocale`.

### Catalog format
Simple key → template mapping:

```yaml
field_required: "field %s is required"
min_len: "field %s must be at least %s characters"
email: "field %s must be a valid email"
strong_password: "field %s must be a stronger password (>=12, upper/lower/digit/special, no spaces)"
malformed_json_at: "malformed JSON at position %s"
invalid_type_for_field: "invalid type for field %s"
invalid_value_for_field: "invalid value for field %s"
empty_body: "request body is empty"
```

### Error envelope
- Always return a single `error` object: `{ code, message, details? }`
- For field-level issues, include `details: [{ field, code, message }]`.

### Recommendations
- CI check to ensure all locales contain the same keys.
- Add metrics/logs for missing keys (already logged by module).
- Extend catalogs and add more locales as needed.


